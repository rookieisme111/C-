# 按tcp/ip协议簇对应得网络结构，从上至下给出每一部分的重点


# **应用层**
1. httP的特点：无状态、非持久连接和持久连接、cookie、
2. http和https的区别
3. **dns的作用？方式（迭代和递归）？**
> 作用：网络上的一台主机可以使用ip地址或主机名所表示，主机名由英文字母组成，便于人的记忆，但是网络中的路由器更适合用纯数字的ip地址来定位主机，这样DNS服务就提供了一种把主机名转换为对应主机ip地址的服务

>DNS本质：1、是一个由分层的DNS服务器实现的分布式数据库 2、一个允许主机查询分布式数据库的应用层协议

> 在浏览器中输入url后发生了什么？
> 1. 为了向http请求报文中写入目的服务器的ip地址，需要借助DNS，首先将主机名截取下来，发送给本机的DNS客户端
> 2. 客户端向DNS服务端发送包含主机名的报文
> 3. 客户端收到DNS服务器的应答报文，包含了解析后的主机ip地址
> 4. 浏览器接收DNS的IP地址，向ip地址对应得http服务器发起tcp连接

>查询方式有递归和迭代两种方式。递归方式，当客户机向本地DNS服务器发送主机名查询请求后，返回得到的是主机名的ip地址，这种属于递归方式；迭代方式，每次域名服务器应答的是下一个要取查询的域名服务器的iP地址，通过多次迭代得到最终的主机名对应的ip地址。

> 域名服务器层次体系：根服务器，顶级域名服务器，权威域名服务器（权威DNS又可以分为多层，上层管理下层服务器的ip地址）

# **传输层**

1. **TCP和DUP的区别。**
> TCP是面向连接的、基于字节流的、点对点的、可靠的传输服务协议
> UDP是无连接的、基于数据报的、支持多对多的、不可靠的传输协议
> 面向连接是指TCP连接建立起来后，需要在内核中开辟资源，来保存连接的状态信息和传输的应用程序数据，当连接断开时，需要释放内核中的资源。
> 基于字节流，是指应用程序对数据的接受和发送没有边界限制，体现在编程中，发送端的写操作次数和接收端的读操作次数没有数量上的关系
> 可靠的传输，确认应答机制，超时重传机制，序列号机制保证报文段在到达后重拍，从而有序

2. **TCP的首部字段、意义**
> 20字节的固定头部结构，和40字节的最大可选选项
> 20字节的固定头部字段，16位源端口、16位目的端口、32位序号、32位的确认号、4位头部大小字段、6位保留、6位状态（URG,ACK,PSH,SYN,FIN,RST）、16位接收通告窗口大小字段、16位校验和、16位紧急指针。

3. **TCP三次握手、四次挥手、其中一些状态的意义**
> TIME_WAIT为什么要存在？
> 1. 可靠的关闭TCP连接。假设客户端发送完最后一个ACK，即刻关闭，如果该报文段没有被服务器接收，那么服务器将不断发送结束报文段
> 2. 保证迟到的TCP报文段可以被识别并抛弃，不会影响该端口下次被使用是接收到上个连接的报文段。

4. **拥塞控制**
> 包含了几个重要概念：流量控制和拥塞控制的区别，窗口机制，拥塞窗口，慢开始门限，慢开始算法+拥塞避免，快重传+快恢复
> 流量控制是从接收端接收数据能力的角度去控制数据发送方的传输数据的速率，维持一个状态变量接收通告窗口，拥塞控制是根据网络的拥堵与否来决定发送端的发送窗口大小，维持一个拥塞窗口，而真正的发送窗口的大小是两者的最小值。
> 窗口控制，是发送端无需接收确认报文段所能发送的最大数据量，可以高效的利用网络的带宽。
> 拥塞控制的第一个方法，慢开始+拥塞避免，慢开始是指发送窗口从1开始，每经过一个RTT时间并且接收到所有报文段的确认后，发送窗口变为原来2倍，知道到达慢开始门限，开始执行拥塞避免，即每经过一个RTT时间，发送窗口的大小+1。如果网络出现拥堵（超时），慢开始门限变为此时发送窗口的一半，发送窗口从1开始执行慢开始算法。
> 第二个，快重传+快恢复，当发送方连续收到三个重复确认号的报文段，将被重复确认的报文段进行重传，并且慢开始门限设为此时发送窗口的一半，发送窗口设置位此时的慢开始门限，并开始执行拥塞避免。





